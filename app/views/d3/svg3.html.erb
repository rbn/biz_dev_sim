<style>
div#thediv {
  width:63.2%;
  margin:auto;
  margin-top:30px;
}

div#stage {
  display:none;
  width:63.2%;
  margin:auto;
  margin-top:30px;
}

div#controls {
  width:20%;
  margin:auto;
  height:80px;
}
svg {
  border:1px solid black;
  background-color:#c4cee9;
  padding:50px;
}

#die, #roller, #start, #move {
  width:120px;
  height:80px;
}

div.bds_button {
  width: 100px;
  height: 75px;
  padding: 4px;
}

div.bds_button.on {
  background-color: yellow;
  border: none;
}

div.bds_button.off {
  background-color:silver;
}
</style>

<script>
function start_bds(first_time, callback) {
  var callback = callback || bds.noop;

  var svg =  d3.select('#thediv')
                .append('svg')
                .attr('width', 900)
                .attr('height', 900);

  var json = [
      { id: 1,  label: "Marketing Call", next: [2], start: true, "x": 130,  "y": 60,  "r": 40, "color" : "yellow" },
      { id: 2,  label: "Marketing Call", next: [3], "x": 330,  "y": 60,  "r": 40, "color" : "blue" },
      { id: 3,  label: "Marketing Call", next: [4], "x": 530,  "y": 60,  "r": 40, "color" : "green" },
      { id: 4,  label: "Marketing Call", next: [5], "x": 730,  "y": 120,  "r": 40, "color" : "green" },
      { id: 5,  label: "Marketing Call", next: [6], "x": 730,  "y": 270,  "r": 40, "color" : "red" },
      { id: 6,  label: "Marketing Call", next: [7], "x": 530,  "y": 330,  "r": 40, "color" : "pink" },
      { id: 7,  label: "Marketing Call", next: [8], "x": 330,  "y": 330,  "r": 40, "color" : "black" },
      { id: 8,  label: "Marketing Call", next: [9], "x": 130,  "y": 390,  "r": 40, "color" : "green" },
      { id: 9,  label: "Marketing Call", next: [10], "x": 130,  "y": 540,  "r": 40, "color" : "green" },
      { id: 10, label: "Marketing Call", next: [11],  "x": 330,  "y": 600,  "r": 40, "color" : "blue" },
      { id: 11, label: "Marketing Call", next: [12],  "x": 530,  "y": 600,  "r": 40, "color" : "red" },
      { id: 12, label: "Marketing Call", next: [13],  "x": 730,  "y": 660,  "r": 40, "color" : "magenta" },
      { id: 13, label: "Marketing Call", next: [14],  "x": 730,  "y": 810,  "r": 40, "color" : "green" },
      { id: 14, label: "Marketing Call", next: [],  "x": 530,  "y": 870,  "r": 40, "color" : "red" }
      ];

      // TODO: just pass in the ids of the control containers in the optoin hash
      bds.app = bds.make_app(svg, json, { 
                fresh: first_time,
                die: '#die',
                start: '#start',
                move: '#move',
                roller: '#roller'
              });

      if (typeof(Storage) === 'undefined')
        alert('This application requires HTML5 support.  Please use a different browser.');

      callback();
}

$(function() {
  start_bds(true);  
});

</script>

<p>
<div id="controls" >
  <table id="main">
    <tr>
      <td>
        <div id="start" />
      </td>
      <td>
        <div id="roller" />
      </td>
      <td>
        <div id="die" />
      </td>
      <td>
        <div id="move" />
      </td>
    </tr>
  </table>
</div>
</p>
<p>
<div id="thediv">
</div>
<div id="stage">
</div>
</p>
